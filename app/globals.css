@tailwind base;
@tailwind components;
@tailwind utilities;

/* Mobile Performance Optimizations */
@layer base {
  /* Optimize for mobile rendering */
  * {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  /* Allow text selection where needed */
  p, span, div, h1, h2, h3, h4, h5, h6, li, a, button, input, textarea, pre, code {
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
  }

  /* Optimize scrolling on mobile */
  html {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  /* Reduce motion for users who prefer it */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Mobile-specific optimizations */
  @media (max-width: 768px) {
    /* Reduce animations on mobile for better performance */
    .chat-message-animate {
      animation: none;
    }

    /* Optimize touch targets */
    button, input, select, textarea {
      min-height: 44px;
      min-width: 44px;
    }

    /* Reduce shadow complexity on mobile */
    .chat-code-block,
    .chat-message-bubble {
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
  }
}

/* Enhanced Chat Formatting Styles */
@layer components {
  /* Code block enhancements */
  .chat-code-block {
    @apply bg-slate-950 border border-slate-700 rounded-lg p-4 my-3 overflow-x-auto;
    position: relative;
    /* Optimize for mobile scrolling */
    -webkit-overflow-scrolling: touch;
  }

  .chat-code-block::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, #8b5cf6, #06b6d4, #10b981);
  }

  /* Inline code styling */
  .chat-inline-code {
    @apply bg-slate-700 text-amber-300 rounded px-2 py-1 text-sm font-mono border border-slate-600;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  /* Address highlighting */
  .chat-address {
    @apply bg-slate-700 text-cyan-300 rounded px-1.5 py-0.5 text-xs font-mono border border-slate-600;
    font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
  }

  /* Function name highlighting */
  .chat-function {
    @apply bg-slate-700 text-green-300 rounded px-1.5 py-0.5 text-xs font-mono border border-slate-600;
    font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
  }

  /* Enhanced list styling */
  .chat-list {
    @apply my-2 space-y-1;
  }

  .chat-list-item {
    @apply ml-4 text-slate-200 mb-1 flex items-start;
  }

  .chat-list-bullet {
    @apply text-purple-400 mr-2 mt-1;
    font-size: 0.875rem;
  }

  /* Link styling */
  .chat-link {
    @apply text-purple-400 hover:text-purple-300 underline transition-colors;
  }

  /* Header styling */
  .chat-header-1 {
    @apply text-2xl font-bold text-white border-b border-slate-600 pb-2 mb-4;
  }

  .chat-header-2 {
    @apply text-xl font-bold text-white mb-3;
  }

  .chat-header-3 {
    @apply text-lg font-semibold text-white mb-2;
  }

  .chat-header-4 {
    @apply text-base font-semibold text-slate-200 mb-2;
  }

  .chat-header-5 {
    @apply text-sm font-semibold text-slate-300 mb-1;
  }

  .chat-header-6 {
    @apply text-xs font-semibold text-slate-400 mb-1;
  }

  /* Message bubble enhancements */
  .chat-message-bubble {
    @apply max-w-md lg:max-w-lg rounded-xl px-4 py-2;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(148, 163, 184, 0.1);
    /* Optimize for mobile */
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  .chat-message-user {
    @apply bg-purple-700 text-white;
    background: linear-gradient(135deg, #7c3aed, #8b5cf6);
  }

  .chat-message-ai {
    @apply bg-slate-700 text-slate-200;
    background: linear-gradient(135deg, #334155, #475569);
  }

  /* Typography enhancements */
  .chat-text {
    @apply leading-relaxed;
    font-feature-settings: 'liga' 1, 'kern' 1;
  }

  /* Scrollbar styling for chat container */
  .chat-container::-webkit-scrollbar {
    width: 6px;
  }

  .chat-container::-webkit-scrollbar-track {
    @apply bg-slate-800;
  }

  .chat-container::-webkit-scrollbar-thumb {
    @apply bg-slate-600 rounded-full;
  }

  .chat-container::-webkit-scrollbar-thumb:hover {
    @apply bg-slate-500;
  }

  /* Animation for new messages - optimized for mobile */
  @keyframes messageSlideIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .chat-message-animate {
    animation: messageSlideIn 0.3s ease-out;
  }

  /* Mobile-specific message animation */
  @media (max-width: 768px) {
    .chat-message-animate {
      animation: messageSlideIn 0.2s ease-out;
    }
  }

  /* Code syntax highlighting improvements */
  .language-solidity {
    color: #e2e8f0;
  }

  .language-javascript {
    color: #e2e8f0;
  }

  .language-typescript {
    color: #e2e8f0;
  }

  /* Terminal-style code block header */
  .code-block-header {
    @apply flex items-center justify-between mb-2 px-2 py-1 bg-slate-900 rounded-t border-b border-slate-700;
  }

  .code-block-language {
    @apply text-xs text-slate-400 font-mono;
  }

  .code-block-dots {
    @apply flex space-x-1;
  }

  .code-block-dot {
    @apply w-3 h-3 rounded-full;
  }

  .code-block-dot-red {
    @apply bg-red-500;
  }

  .code-block-dot-yellow {
    @apply bg-yellow-500;
  }

  .code-block-dot-green {
    @apply bg-green-500;
  }

  /* Mobile-specific optimizations */
  @media (max-width: 768px) {
    /* Reduce padding on mobile */
    .chat-code-block {
      @apply p-3 my-2;
    }

    /* Optimize message bubbles for mobile */
    .chat-message-bubble {
      @apply max-w-full px-3 py-2;
    }

    /* Reduce header sizes on mobile */
    .chat-header-1 {
      @apply text-xl;
    }

    .chat-header-2 {
      @apply text-lg;
    }

    .chat-header-3 {
      @apply text-base;
    }

    /* Optimize list spacing on mobile */
    .chat-list-item {
      @apply ml-2;
    }

    /* Reduce code block font size on mobile */
    .language-solidity,
    .language-javascript,
    .language-typescript {
      font-size: 0.875rem;
    }
  }

  /* Loading state optimizations */
  .loading-optimized {
    will-change: opacity;
    transform: translateZ(0);
  }

  /* Touch-friendly interactions */
  @media (hover: none) and (pointer: coarse) {
    .chat-link:hover {
      @apply text-purple-400;
    }

    .chat-message-bubble:hover {
      transform: none;
    }
  }
}
